#cloud-config
# Add groups to the system
# Adds the ubuntu group with members 'root' and 'sys'
# and the empty group hashicorp.
groups:
  - ubuntu: [root,sys]
  - lab

# Add users to the system. Users are added after groups are added.
users:
  - default
  - name: lab
    gecos: lab
    primary_group: lab
    sudo: ALL=(ALL) NOPASSWD:ALL
    groups: users, admin
    shell: /bin/bash
    plain_text_passwd: 'lab123'
    ssh_import_id:
    lock_passwd: false
    ssh_authorized_keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCorgCnJxl7sttVkaTxdOz9vdHUtk7fLwntAzEQi14MjAuJrP1u/Ke/li6D/+x9/BsK+G6HqBNvjB6w+4I7/zb1GuAQ2rIrwct+y0ukF/VWKhsgpIlHlJldpvdg0do6nrYtSiFdWw3RyDBfoXijOG7868dIkxkLdyilWLcu0a0wsHEh8Lkgw86n1BJoYTxVKfFrql+RWTDd2rfRMbMZ1B+OWxM/UssEspBbL6J5uyxUJNYEGjNXHH7Tt5s5dtp16k3Qr7d8pBi2zeO3azhOb8zY1v0hZ/z3GlcAlnHCokquJWCnzgTaA52QOc3SUxwuQMW7zRAm7TxWFg1A11s8BUoFHueOuvnoNCK8eF3geRZLwUmeQusyBrO7eTaoXJ42D+TZtinr2HYNbZTPbw7vJtqh4cZtd9pvUZUOwYI152qbch2xc5GOQfKgrMkKTpajAAujrXaOi97tVrkjC4jeNLNgF9rbP0UWSLcUF1g54fErJYpfNnXt23eW33HQR7foaus= lab@example.com

write_files:
  - path: /index.html
    content: |
      <html>
      <link rel="preconnect" href="https://fonts.gstatic.com">
      <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;700&display=swap" rel="stylesheet">
      <head>
        <title>Test Website</title>
      </head>
      <body>
        <br/><br/>
        <h1 align="center" style="font-family:Ubuntu">WELCOME TO YOUR TEST WEBSITE</h1>
        <br/>
        <h3 align="center" style="font-family:Ubuntu">This is all about AWS flow logs </h3>
        <br/><br/>
        <p align="center">
          <img src="https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2019/09/13/2019-08-13_10-41-04.png">
        </p>
        <br/>
      </body>
      </html>

apt:
  primary:
    - arches: [default]
      search_dns: True

# Downloads the Python package
packages:
  - python

# Launch the SimpleHTTPServer on port 80
runcmd:
  - python -m SimpleHTTPServer 80 &

final_message: "The system is finally up, after $UPTIME seconds"